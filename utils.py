import csv
import logging

LOGGER = logging.getLogger('cve-score')


def write_predictions(filename, p_hat, y_true):
    '''Writes CSV file of scores and ground-truth labels.

    Arguments:
        filename  [str] target file.
        p_hat     [iter] class scores as shape [1] tensors.
        y_true    [iter] ground truth labels as shape [1] tensors.

    Notes: Accptable format for `p_hat`, `y_true` are lists of numpy arrays
    with a single element, or as a single numpy array of shape (N, 1), i.e.,
    a "column" matrix.
    '''
    with open(filename, 'w') as fh:
        LOGGER.info('writing %s', filename)
        wtr = csv.writer(fh)
        wtr.writerow(['p_hat', 'y_true'])
        for score, label in zip(p_hat, y_true):
            wtr.writerow(list(score) + list(label))
